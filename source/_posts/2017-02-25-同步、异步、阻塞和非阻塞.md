---
title: 同步、异步、阻塞和非阻塞
date: 2017-02-25 11:18:40
categories:
- IO
tags:
- IO
---

IO操作其实可以分成两个步骤，**请求IO操作**和**执行IO操作**。一般的IO调用过程是这样的：发起IO操作的请求，执行IO操作，得到IO操作的结果，将结果返回给IO操作请求。

**场景**：我去银行办理业务，可能选择排队等候，也可能取一个小纸条上面有我的号码，等到排到我这一号时由柜台的人通知我轮到我去办理业务了。

# 同步和异步
前者(排队等候，**主动**)就是**同步**等待消息；而后者(等待别人通知，**被动**)就是**异步**等待消息。

同步和异步是一种**通知机制**，涉及到**调用方**和**被调用方**。
**同步**：就是在发出一个调用时，在没有得到结果之前，该调用就不返回。但是一旦调用返回，就得到返回值了。 换句话说，就是由调用者主动等待这个调用的结果。
**异步**：调用在发出之后，这个调用就直接返回了，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在调用发出后，被调用者通过状态、通知来通知调用者，或通过回调函数处理这个调用

# 阻塞和非阻塞
不论是排队还是使用号码等待通知，如果在这个等待的过程中，等待者除了等待消息之外不能做其它的事情，那么该机制就是**阻塞**的。
> 表现在程序中，也就是该程序一直阻塞在该函数调用处不能继续往下执行。

相反，有的人喜欢在银行办理这些业务的时候一边打打电话发发短信一边等待，这样的状态就是**非阻塞**的，因为他(等待者)没有阻塞在这个消息通知上，而是一边做自己的事情一边等待。


阻塞和非阻塞关注的是程序在等待调用结果（消息，返回值）时的**状态**。
**阻塞**：是指调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。
**非阻塞**：是指在不能立刻得到结果之前，该调用不会阻塞当前线程。